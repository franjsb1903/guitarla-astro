---
import Layout from '../layouts/Layout.astro'
import Guitar from '../components/Guitar.astro'

import type { GuitarResponse } from '../models/Guitar'

const url = `${import.meta.env.PUBLIC_API_URL}/guitars?populate=image`
const { data }: GuitarResponse = await fetch(url).then(res => res.json())
---

<Layout
  title="Tienda Virtual"
  description="Página de tienda de instrumentos musicales, guitarras, cursos, blog y más"
>
  <main class="contenedor">
    <h1 class="heading">Nuestra Colección</h1>

    <div class="grid">
      {data?.map(guitar => <Guitar guitar={guitar.attributes} />)}
    </div>
  </main>
</Layout>

<style></style>
